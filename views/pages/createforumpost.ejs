<!DOCTYPE html>
<html lang="en">

<!-- Include the head -->
<%- include('../partials/head.ejs', { title: 'Create A Post | PlacementHub', cssFiles: ['/styles/createforumpost.css', '/styles/nav.css'], bootstrap: true, infolder: false  }) %>

<body>

<!-- Include the navbar -->
<%- include('../partials/nav.ejs', { currentPage: 'CreateForumPost', infolder: false }) %>

<main class="main">
  <div class="main-cards">
    <form action="/addpost" method="POST" enctype="multipart/form-data">
      <div class="card">
          <!-- User Info -->
          <div class="user-info">
            <img src="<%= user.picture.thumbnail %>" alt="User Photo" class="user-photo" />
            <div class="user-details">
                <p class="user-name"><%= user.name.first %></p>
                <p class="user-course"><%= user.course %></p>
            </div>
            
              <!-- Anonymous Toggle -->
              <div class="anonymous-toggle">
                  <p class="anonymous-text">Post Anonymously</p>
                  <input type="checkbox" id="anonymousSwitch" name="anonymousSwitch">
                  <label class="slider" for="anonymousSwitch"></label>
              </div>          
          </div>
  
          <div class="select-section">
              <p>Category:</p>
              <div class="dropdown-container">
                  <select name="category" id="category" onchange="updateSubcategoryOptions()">
                      <option value="NHSRegions">NHS Regions</option>
                      <option value="Degree">Degree</option>
                      <option value="Acccommodation">Accommodation</option>
                      <option value="Other">Other</option>
                  </select>
              </div>
      
              <p>Subcategory:</p>
              <div class="dropdown-container">
                  <select name="subcategory" id="subcategory" onchange="updateSubcategoryInput(this)">
                      <!-- Subcategory options will be dynamically updated -->
                  </select>
                  <input type="text" name="customSubcategory" id="customSubcategory" placeholder="Enter custom subcategory" style="display: none;" />
              </div>
          </div>
  
          <input type="text" name="postHeading" placeholder="Enter your post heading/question" class="post-heading" required />
  
          <!-- Post Content -->
          <textarea name="postContent" placeholder="Add more details to your post" class="post-content" required></textarea>
  
          <!-- Hidden File Input for Image Upload -->
          <input type="file" name="postImage" id="postImage" accept="image/*" style="display: none;">
  
          <!-- Action Buttons -->
          <div class="action-buttons">
              <button type="button" class="add-image" onclick="document.getElementById('postImage').click();">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-image">
                      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                      <circle cx="8.5" cy="8.5" r="1.5"></circle>
                      <path d="M21 15l-5-5L5 21"></path>
                  </svg>
                  Add Image
              </button>
              <button type="submit" class="post-button">Post</button>
          </div>
      </div>
  </form>
  
  </div>
</main>

<%- include('../partials/footer.ejs')%>

</body>

<!-- links to bootstrap js and jquery -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<script src="/scripts/createforumpost.js"></script>

</html>
